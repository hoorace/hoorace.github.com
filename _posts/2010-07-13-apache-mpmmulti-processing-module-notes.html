---
comments: true
date: 2010-07-13 20:55:58
layout: post
slug: apache-mpmmulti-processing-module-%e5%ad%a6%e4%b9%a0%e7%ac%94%e8%ae%b0
title: Apache MPM(Multi-processing module) 学习笔记
wordpress_id: 562
categories:
- Linux
tag:
- apache
- linux
---

<p style="background-color: rgb(230, 230, 250); height: 25px; width: 100%; padding-top: 9px;"><span style="color: rgb(0, 0, 0);"><span style="font-family: arial,helvetica,sans-serif;"><span style="font-size: 14px;"><strong>&nbsp;&nbsp;&nbsp; 编译参数：</strong></span></span></span></p>
<div style="border-left: 2px solid rgb(204, 204, 204); padding-left: 6px; margin-left: 6px; margin-bottom: 10px;">
	<p><span style="color: rgb(0, 0, 0);"><span style="font-size: 14px;">&nbsp;&nbsp;&nbsp; --with-mpm=MPM Choose the process model for Apache to use.</span></span></p>
	<p><span style="color: rgb(0, 0, 0);"><span style="font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp; MPM={beos|worker|prefork|mpmt_os2|perchild|leader|threadpool|win_nt}<br />
		linux和unix下面默认为profork模式，常用的有worker模式和profork模式，windows下面是win_nt模式。<br />
		<br />
		</span></span></p>
</div>
<p style="background-color: rgb(230, 230, 250); height: 25px; width: 100%; padding-top: 9px;"><span style="color: rgb(0, 0, 0);"><span style="font-family: arial,helvetica,sans-serif;"><span style="font-size: 14px;"><strong>&nbsp;&nbsp;&nbsp; 1：profork</strong></span></span></span></p>
<div style="border-left: 2px solid rgb(204, 204, 204); padding-left: 6px; margin-left: 6px; margin-bottom: 10px;">
	<p><span style="color: rgb(0, 0, 0);"><span style="font-size: 14px;"><strong>工作原理：</strong>一个单独的控制进程(父进程)负责产生子进程，这些子进程用于监听请求并作出应答。Apache总是试图保持一些备用的(spare)或者是空 闲的子进程用于迎接即将到来的请求。这样客户端就不需要在得到服务前等候子进程的产生。将MaxClients设置为一个足够大的数值以处理潜在的请求高 峰，同时又不能太大，以致需要使用的内存超出物理内存的大小。<br />
		<br />
		<strong>优点：</strong>具有很强的自我调节能力，只需要很少的配置指令调整。<br />
		</span></span></p>
	<table id="internal-source-marker_0.3794678095728159" style="border-style: none; border-collapse: collapse;">
		<tbody>
			<tr style="height: 0px;">
				<td style="border: 1px dotted rgb(170, 170, 170); vertical-align: top; padding: 7px;"><span style="color: rgb(0, 0, 0);"><br />
					</span></td>
				<td style="border: 1px dotted rgb(170, 170, 170); vertical-align: top; padding: 7px;"><span style="color: rgb(0, 0, 0);"><span class="Apple-style-span" style="border-collapse: separate; font-family: Simsun; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; font-size: medium;"><span class="Apple-style-span" style="font-size: 15px;"><span style="font-size: 14px;"><span style="font-family: Arial; background-color: transparent; font-weight: normal; font-style: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">默认值</span></span></span></span></span></td>
				<td style="border: 1px dotted rgb(170, 170, 170); vertical-align: top; padding: 7px;"><span style="color: rgb(0, 0, 0);"><span class="Apple-style-span" style="border-collapse: separate; font-family: Simsun; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; font-size: medium;"><span class="Apple-style-span" style="font-size: 15px;"><span style="font-size: 14px;"><span style="font-family: Arial; background-color: transparent; font-weight: normal; font-style: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">说明</span></span></span></span></span></td>
			</tr>
			<tr style="height: 0px;">
				<td style="border: 1px dotted rgb(170, 170, 170); vertical-align: top; padding: 7px;"><span style="color: rgb(0, 0, 0);"><span class="Apple-style-span" style="border-collapse: separate; font-family: Simsun; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; font-size: medium;"><span class="Apple-style-span" style="font-size: 15px;"><span style="font-size: 14px;"><span style="font-family: Arial; background-color: transparent; font-weight: normal; font-style: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">MaxSpareServers</span></span></span></span></span></td>
				<td style="border: 1px dotted rgb(170, 170, 170); vertical-align: top; padding: 7px;"><span style="color: rgb(0, 0, 0);"><span class="Apple-style-span" style="border-collapse: separate; font-family: Simsun; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; font-size: medium;"><span class="Apple-style-span" style="font-size: 15px;"><span style="font-size: 14px;"><span style="font-family: Arial; background-color: transparent; font-weight: normal; font-style: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">10</span></span></span></span></span></td>
				<td style="border: 1px dotted rgb(170, 170, 170); vertical-align: top; padding: 7px;"><span style="color: rgb(0, 0, 0);"><span class="Apple-style-span" style="border-collapse: separate; font-family: Simsun; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; font-size: medium;"><span class="Apple-style-span" style="font-size: 15px;"><span style="font-size: 14px;"><span style="font-family: Arial; background-color: transparent; font-weight: normal; font-style: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">设置空闲子进程的最大数量。如果当前有超过MaxSpareServers数量的空闲子进程，那么父进程将杀死多余的子进程。只有非常繁忙的机器才用设置这个值，不要设置的太大。</span></span></span></span></span></td>
			</tr>
			<tr style="height: 0px;">
				<td style="border: 1px dotted rgb(170, 170, 170); vertical-align: top; padding: 7px;"><span style="color: rgb(0, 0, 0);"><span class="Apple-style-span" style="border-collapse: separate; font-family: Simsun; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; font-size: medium;"><span class="Apple-style-span" style="font-size: 15px;"><span style="font-size: 14px;"><span style="font-family: Arial; background-color: transparent; font-weight: normal; font-style: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">MinSpareServers</span></span></span></span></span></td>
				<td style="border: 1px dotted rgb(170, 170, 170); vertical-align: top; padding: 7px;"><span style="color: rgb(0, 0, 0);"><span class="Apple-style-span" style="border-collapse: separate; font-family: Simsun; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; font-size: medium;"><span class="Apple-style-span" style="font-size: 15px;"><span style="font-size: 14px;"><span style="font-family: Arial; background-color: transparent; font-weight: normal; font-style: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">5</span></span></span></span></span></td>
				<td style="border: 1px dotted rgb(170, 170, 170); vertical-align: top; padding: 7px;"><span style="color: rgb(0, 0, 0);"><span class="Apple-style-span" style="border-collapse: separate; font-family: Simsun; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; font-size: medium;"><span class="Apple-style-span" style="font-size: 15px;"><span style="font-size: 14px;"><span style="font-family: Arial; background-color: transparent; font-weight: normal; font-style: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">空闲子进程的最小数量</span></span></span></span></span></td>
			</tr>
			<tr style="height: 0px;">
				<td style="border: 1px dotted rgb(170, 170, 170); vertical-align: top; padding: 7px;"><span style="color: rgb(0, 0, 0);"><span class="Apple-style-span" style="border-collapse: separate; font-family: Simsun; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; font-size: medium;"><span class="Apple-style-span" style="font-size: 15px;"><span style="font-size: 14px;"><span style="font-family: Arial; background-color: transparent; font-weight: normal; font-style: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">StartServers</span></span></span></span></span></td>
				<td style="border: 1px dotted rgb(170, 170, 170); vertical-align: top; padding: 7px;"><span style="color: rgb(0, 0, 0);"><span class="Apple-style-span" style="border-collapse: separate; font-family: Simsun; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; font-size: medium;"><span class="Apple-style-span" style="font-size: 15px;"><span style="font-size: 14px;"><span style="font-family: Arial; background-color: transparent; font-weight: normal; font-style: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">5</span></span></span></span></span></td>
				<td style="border: 1px dotted rgb(170, 170, 170); vertical-align: top; padding: 7px;"><span style="color: rgb(0, 0, 0);"><span class="Apple-style-span" style="border-collapse: separate; font-family: Simsun; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; font-size: medium;"><span class="Apple-style-span" style="font-size: 15px;"><span style="font-size: 14px;"><span style="font-family: Arial; background-color: transparent; font-weight: normal; font-style: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">设置了服务器启动时建立的子进程数量。因为子进程数量动态的取决于负载的轻重，所有一般没有必要调整这个参数 </span></span></span></span></span></td>
			</tr>
			<tr style="height: 0px;">
				<td style="border: 1px dotted rgb(170, 170, 170); vertical-align: top; padding: 7px;"><span style="color: rgb(0, 0, 0);"><span class="Apple-style-span" style="border-collapse: separate; font-family: Simsun; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; font-size: medium;"><span class="Apple-style-span" style="font-size: 15px;"><span style="font-size: 14px;"><span style="font-family: Arial; background-color: transparent; font-weight: normal; font-style: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">ServerLimit </span></span></span></span></span></td>
				<td style="border: 1px dotted rgb(170, 170, 170); vertical-align: top; padding: 7px;"><span style="color: rgb(0, 0, 0);"><span class="Apple-style-span" style="border-collapse: separate; font-family: Simsun; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; font-size: medium;"><span class="Apple-style-span" style="font-size: 15px;"><span style="font-size: 14px;"><span style="font-family: Arial; background-color: transparent; font-weight: normal; font-style: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">最大200000，编译默认20000</span></span></span></span></span></td>
				<td style="border: 1px dotted rgb(170, 170, 170); vertical-align: top; padding: 7px;"><span style="color: rgb(0, 0, 0);"><span class="Apple-style-span" style="border-collapse: separate; font-family: Simsun; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; font-size: medium;"><span class="Apple-style-span" style="font-size: 15px;"><span style="font-size: 14px;"><span style="font-family: Arial; background-color: transparent; font-weight: normal; font-style: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">只有在你需要将MaxClients设置成高于默认值256的时候才需要使用这个指令。要将此指令的值保持和MaxClients一样。</span></span></span></span></span></td>
			</tr>
			<tr style="height: 0px;">
				<td style="border: 1px dotted rgb(170, 170, 170); vertical-align: top; padding: 7px;"><span style="color: rgb(0, 0, 0);"><span class="Apple-style-span" style="border-collapse: separate; font-family: Simsun; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; font-size: medium;"><span class="Apple-style-span" style="font-size: 15px;"><span style="font-size: 14px;"><span style="font-family: Arial; background-color: transparent; font-weight: normal; font-style: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">MaxClients</span></span></span></span></span></td>
				<td style="border: 1px dotted rgb(170, 170, 170); vertical-align: top; padding: 7px;"><span style="color: rgb(0, 0, 0);"><span class="Apple-style-span" style="border-collapse: separate; font-family: Simsun; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; font-size: medium;"><span class="Apple-style-span" style="font-size: 15px;"><span style="font-size: 14px;"><span style="font-family: Arial; background-color: transparent; font-weight: normal; font-style: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">256</span></span></span></span></span></td>
				<td style="border: 1px dotted rgb(170, 170, 170); vertical-align: top; padding: 7px;"><span style="color: rgb(0, 0, 0);"><span class="Apple-style-span" style="border-collapse: separate; font-family: Simsun; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; font-size: medium;"><span class="Apple-style-span" style="font-size: 15px;"><span style="font-size: 14px;"><span style="font-family: Arial; background-color: transparent; font-weight: normal; font-style: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">MaxClients指令设置了允许同时伺服的最大接入请求数量。任何超过MaxClients限制的请求都将进入等候队列，直到达到ListenBacklog指令限制的最大值为止。一旦一个链接被释放，队列中的请求将得到服务。对于非线程型的MPM(也就是prefork)，MaxClients表示可以用于伺服客户端请求的最大子进程数量，默认值是256。要增大这个值，你必须同时增大ServerLimit 。</span></span></span></span></span></td>
			</tr>
			<tr style="height: 0px;">
				<td style="border: 1px dotted rgb(170, 170, 170); vertical-align: top; padding: 7px;"><span style="color: rgb(0, 0, 0);"><span class="Apple-style-span" style="border-collapse: separate; font-family: Simsun; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; font-size: medium;"><span class="Apple-style-span" style="font-size: 15px;"><span style="font-size: 14px;"><span style="font-family: Arial; background-color: transparent; font-weight: normal; font-style: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">MaxRequestsPerChild</span></span></span></span></span></td>
				<td style="border: 1px dotted rgb(170, 170, 170); vertical-align: top; padding: 7px;"><span style="color: rgb(0, 0, 0);"><span class="Apple-style-span" style="border-collapse: separate; font-family: Simsun; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; font-size: medium;"><span class="Apple-style-span" style="font-size: 15px;"><span style="font-size: 14px;"><span style="font-family: Arial; background-color: transparent; font-weight: normal; font-style: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">10000</span></span></span></span></span></td>
				<td style="border: 1px dotted rgb(170, 170, 170); vertical-align: top; padding: 7px;"><span style="color: rgb(0, 0, 0);"><span class="Apple-style-span" style="border-collapse: separate; font-family: Simsun; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; font-size: medium;"><span class="Apple-style-span" style="font-size: 15px;"><span style="font-size: 14px;"><span style="font-family: Arial; background-color: transparent; font-weight: normal; font-style: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">设置每个子进程在其生存期内允许伺服的最大请求数量。到达MaxRequestsPerChild的限制后，子进程将会结束。如果MaxRequestsPerChild为&quot;0&quot;，子进程将永远不会结束。</span></span></span></span></span></td>
			</tr>
		</tbody>
	</table>
	<p><span style="color: rgb(0, 0, 0);"><span style="font-size: 14px;"><span class="Apple-style-span" style="border-collapse: separate; font-family: Simsun; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px;"><span class="Apple-style-span">&nbsp;</span></span></span></span></p>
</div>
<p style="background-color: rgb(230, 230, 250); height: 25px; width: 100%; padding-top: 9px;"><span style="color: rgb(0, 0, 0);"><span style="font-family: arial,helvetica,sans-serif;"><span style="font-size: 14px;"><strong>&nbsp;&nbsp;&nbsp; 2：worker</strong></span></span></span></p>
<div style="border-left: 2px solid rgb(204, 204, 204); padding-left: 6px; margin-left: 6px; margin-bottom: 10px;">
	<p><span style="color: rgb(0, 0, 0);"><span style="font-size: 14px;"><strong>工作原理：</strong>每个进程可以拥有的线程数量是固定的。服务器会根据负载情况增加或减少进程数量。一个单独的控制进程(父进程)负责子进程的建立。每个子进程可 以建立ThreadsPerChild数量的服务线程和一个监听线程，该监听线程监听接入请求并将其传递给服务线程处理和应答。<br />
		<br />
		<strong>优点：</strong>由于使用线程来处理请求，所以可以处理海量请求，而系统资源的开销小于基于进程的MPM，是apache2.0后的发展趋势。<br />
		</span></span></p>
	<blockquote>
		<p><span style="color: rgb(0, 0, 0);"><span style="font-size: 14px;">典型设置：<br />
			ServerLimit 16<br />
			StartServers 2<br />
			MaxClients 150<br />
			MinSpareThreads 25<br />
			MaxSpareThreads 75<br />
			ThreadsPerChild 25<br />
			</span></span></p>
	</blockquote>
	<table style="border-style: none; border-collapse: collapse;">
		<tbody>
			<tr style="height: 0px;">
				<td style="border: 1px dotted rgb(170, 170, 170); vertical-align: top; padding: 7px;"><span style="color: rgb(0, 0, 0);"><br />
					</span></td>
				<td style="border: 1px dotted rgb(170, 170, 170); vertical-align: top; padding: 7px;"><span style="color: rgb(0, 0, 0);"><span class="Apple-style-span" style="border-collapse: separate; font-family: Simsun; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; font-size: medium;"><span class="Apple-style-span" style="font-size: 15px;"><span style="font-size: 14px;"><span style="font-family: Arial; background-color: transparent; font-weight: normal; font-style: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">默认值</span></span></span></span></span></td>
				<td style="border: 1px dotted rgb(170, 170, 170); vertical-align: top; padding: 7px;"><span style="color: rgb(0, 0, 0);"><span class="Apple-style-span" style="border-collapse: separate; font-family: Simsun; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; font-size: medium;"><span class="Apple-style-span" style="font-size: 15px;"><span style="font-size: 14px;"><span style="font-family: Arial; background-color: transparent; font-weight: normal; font-style: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">说明</span></span></span></span></span></td>
			</tr>
			<tr style="height: 0px;">
				<td style="border: 1px dotted rgb(170, 170, 170); vertical-align: top; padding: 7px;"><span style="color: rgb(0, 0, 0);"><span class="Apple-style-span" style="border-collapse: separate; font-family: Simsun; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; font-size: medium;"><span class="Apple-style-span" style="font-size: 15px;"><span style="font-size: 14px;"><span style="font-family: Arial; background-color: transparent; font-weight: normal; font-style: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">MaxSpareThreads</span></span></span></span></span></td>
				<td style="border: 1px dotted rgb(170, 170, 170); vertical-align: top; padding: 7px;"><span style="color: rgb(0, 0, 0);"><span class="Apple-style-span" style="border-collapse: separate; font-family: Simsun; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; font-size: medium;"><span class="Apple-style-span" style="font-size: 15px;"><span style="font-size: 14px;"><span style="font-family: Arial; background-color: transparent; font-weight: normal; font-style: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">250</span></span></span></span></span></td>
				<td style="border: 1px dotted rgb(170, 170, 170); vertical-align: top; padding: 7px;"><span style="color: rgb(0, 0, 0);"><span class="Apple-style-span" style="border-collapse: separate; font-family: Simsun; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; font-size: medium;"><span class="Apple-style-span" style="font-size: 15px;"><span style="font-size: 14px;"><span style="font-family: Arial; background-color: transparent; font-weight: normal; font-style: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">最大空闲线程数</span></span></span></span></span></td>
			</tr>
			<tr style="height: 0px;">
				<td style="border: 1px dotted rgb(170, 170, 170); vertical-align: top; padding: 7px;"><span style="color: rgb(0, 0, 0);"><span class="Apple-style-span" style="border-collapse: separate; font-family: Simsun; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; font-size: medium;"><span class="Apple-style-span" style="font-size: 15px;"><span style="font-size: 14px;"><span style="font-family: Arial; background-color: transparent; font-weight: normal; font-style: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">MinSpareThreads</span></span></span></span></span></td>
				<td style="border: 1px dotted rgb(170, 170, 170); vertical-align: top; padding: 7px;"><span style="color: rgb(0, 0, 0);"><span class="Apple-style-span" style="border-collapse: separate; font-family: Simsun; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; font-size: medium;"><span class="Apple-style-span" style="font-size: 15px;"><span style="font-size: 14px;"><span style="font-family: Arial; background-color: transparent; font-weight: normal; font-style: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">75</span></span></span></span></span></td>
				<td style="border: 1px dotted rgb(170, 170, 170); vertical-align: top; padding: 7px;"><span style="color: rgb(0, 0, 0);"><span class="Apple-style-span" style="border-collapse: separate; font-family: Simsun; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; font-size: medium;"><span class="Apple-style-span" style="font-size: 15px;"><span style="font-size: 14px;"><span style="font-family: Arial; background-color: transparent; font-weight: normal; font-style: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">最小空闲线程数</span></span></span></span></span></td>
			</tr>
			<tr style="height: 0px;">
				<td style="border: 1px dotted rgb(170, 170, 170); vertical-align: top; padding: 7px;"><span style="color: rgb(0, 0, 0);"><span class="Apple-style-span" style="border-collapse: separate; font-family: Simsun; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; font-size: medium;"><span class="Apple-style-span" style="font-size: 15px;"><span style="font-size: 14px;"><span style="font-family: Arial; background-color: transparent; font-weight: normal; font-style: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">StartServers</span></span></span></span></span></td>
				<td style="border: 1px dotted rgb(170, 170, 170); vertical-align: top; padding: 7px;"><span style="color: rgb(0, 0, 0);"><span class="Apple-style-span" style="border-collapse: separate; font-family: Simsun; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; font-size: medium;"><span class="Apple-style-span" style="font-size: 15px;"><span style="font-size: 14px;"><span style="font-family: Arial; background-color: transparent; font-weight: normal; font-style: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">3</span></span></span></span></span></td>
				<td style="border: 1px dotted rgb(170, 170, 170); vertical-align: top; padding: 7px;"><span style="color: rgb(0, 0, 0);"><span class="Apple-style-span" style="border-collapse: separate; font-family: Simsun; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; font-size: medium;"><span class="Apple-style-span" style="font-size: 15px;"><span style="font-size: 14px;"><span style="font-family: Arial; background-color: transparent; font-weight: normal; font-style: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">设置了服务器启动时建立的子进程数量。因为子进程数量动态的取决于负载的轻重，所有一般没有必要调整这个参数 </span></span></span></span></span></td>
			</tr>
			<tr style="height: 0px;">
				<td style="border: 1px dotted rgb(170, 170, 170); vertical-align: top; padding: 7px;"><span style="color: rgb(0, 0, 0);"><span class="Apple-style-span" style="border-collapse: separate; font-family: Simsun; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; font-size: medium;"><span class="Apple-style-span" style="font-size: 15px;"><span style="font-size: 14px;"><span style="font-family: Arial; background-color: transparent; font-weight: normal; font-style: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">ServerLimit </span></span></span></span></span></td>
				<td style="border: 1px dotted rgb(170, 170, 170); vertical-align: top; padding: 7px;"><span style="color: rgb(0, 0, 0);"><span class="Apple-style-span" style="border-collapse: separate; font-family: Simsun; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; font-size: medium;"><span class="Apple-style-span" style="font-size: 15px;"><span style="font-size: 14px;"><span style="font-family: Arial; background-color: transparent; font-weight: normal; font-style: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">最大200000，编译默认20000</span></span></span></span></span></td>
				<td style="border: 1px dotted rgb(170, 170, 170); vertical-align: top; padding: 7px;"><span style="color: rgb(0, 0, 0);"><span class="Apple-style-span" style="border-collapse: separate; font-family: Simsun; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; font-size: medium;"><span class="Apple-style-span" style="font-size: 15px;"><span style="font-size: 14px;"><span style="font-family: Arial; background-color: transparent; font-weight: normal; font-style: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">只有需要将MaxClients和ThreadsPerChild设置成需要超过默认值16个子进程的时候才需要使用这个指令。不要将该指令的值设置的比MaxClients 和ThreadsPerChild需要的子进程数量高。</span></span></span></span></span></td>
			</tr>
			<tr style="height: 0px;">
				<td style="border: 1px dotted rgb(170, 170, 170); vertical-align: top; padding: 7px;"><span style="color: rgb(0, 0, 0);"><span class="Apple-style-span" style="border-collapse: separate; font-family: Simsun; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; font-size: medium;"><span class="Apple-style-span" style="font-size: 15px;"><span style="font-size: 14px;"><span style="font-family: Arial; background-color: transparent; font-weight: normal; font-style: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">MaxClients</span></span></span></span></span></td>
				<td style="border: 1px dotted rgb(170, 170, 170); vertical-align: top; padding: 7px;"><span style="color: rgb(0, 0, 0);"><span class="Apple-style-span" style="border-collapse: separate; font-family: Simsun; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; font-size: medium;"><span class="Apple-style-span" style="font-size: 15px;"><span style="font-size: 14px;"><span style="font-family: Arial; background-color: transparent; font-weight: normal; font-style: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">50</span></span></span></span></span></td>
				<td style="border: 1px dotted rgb(170, 170, 170); vertical-align: top; padding: 7px;"><span style="color: rgb(0, 0, 0);"><span class="Apple-style-span" style="border-collapse: separate; font-family: Simsun; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; font-size: medium;"><span class="Apple-style-span" style="font-size: 15px;"><span style="font-size: 14px;"><span style="font-family: Arial; background-color: transparent; font-weight: normal; font-style: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">表示可以用于伺服客户端请求的最大线程数量。对于混合型的MPM默认值是16(ServerLimit)乘以25(ThreadsPerChild)的结果。因此要将MaxClients增加到超过16个进程才能提供的时候，你必须同时增加ServerLimit的值。</span></span></span></span></span></td>
			</tr>
			<tr style="height: 0px;">
				<td style="border: 1px dotted rgb(170, 170, 170); vertical-align: top; padding: 7px;"><span style="color: rgb(0, 0, 0);"><span class="Apple-style-span" style="border-collapse: separate; font-family: Simsun; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; font-size: medium;"><span class="Apple-style-span" style="font-size: 15px;"><span style="font-size: 14px;"><span style="font-family: Arial; background-color: transparent; font-weight: normal; font-style: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">ThreadsPerChild</span></span></span></span></span></td>
				<td style="border: 1px dotted rgb(170, 170, 170); vertical-align: top; padding: 7px;"><span style="color: rgb(0, 0, 0);"><span class="Apple-style-span" style="border-collapse: separate; font-family: Simsun; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; font-size: medium;"><span class="Apple-style-span" style="font-size: 15px;"><span style="font-size: 14px;"><span style="font-family: Arial; background-color: transparent; font-weight: normal; font-style: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">25</span></span></span></span></span></td>
				<td style="border: 1px dotted rgb(170, 170, 170); vertical-align: top; padding: 7px;"><span style="color: rgb(0, 0, 0);"><span class="Apple-style-span" style="border-collapse: separate; font-family: Simsun; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; font-size: medium;"><span class="Apple-style-span" style="font-size: 15px;"><span style="font-size: 14px;"><span style="font-family: Arial; background-color: transparent; font-weight: normal; font-style: normal; text-decoration: none; vertical-align: baseline; white-space: pre-wrap;">这个指令设置了每个子进程建立的线程数。子进程在启动时建立这些线程后就不再建立新的线程了。如果使用一个类似于mpm_winnt只有一个子进程的MPM，这个数值要足够大，以便可以处理可能的请求高峰。如果使用一个类似于worker有多个子进程的MPM，每个子进程所拥有的所有线程的总数要足够大，以便可以处理可能的请求高峰。</span></span></span></span></span></td>
			</tr>
		</tbody>
	</table>
</div>
<p style="background-color: rgb(230, 230, 250); height: 25px; width: 100%; padding-top: 9px;"><span style="color: rgb(0, 0, 0);"><span style="font-family: arial,helvetica,sans-serif;"><span style="font-size: 14px;"><strong>&nbsp;&nbsp;&nbsp; 3：event</strong></span></span></span></p>
<div style="border-left: 2px solid rgb(204, 204, 204); padding-left: 6px; margin-left: 6px; margin-bottom: 10px;">
	<p><span style="color: rgb(0, 0, 0);"><span style="font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; event多路处理模块(MPM)被设计成面向需要处理大量并发连接的场合(特别是在开启KeepAlive的场合)，它基于worker开发，并且配置 指令与worker完全相同。<br />
		</span></span></p>
	<p><span style="color: rgb(0, 0, 0);"><span style="font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 要使用event MPM，你必须在配置脚本configure的命令行上使用--with-mpm=event选项。<br />
		</span></span></p>
	<p><span style="color: rgb(0, 0, 0);"><span style="font-size: 14px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 该MPM依赖于APR用于线程同步的compare-and-swap原子操作，并且你还需要在configure命令行上使用--enable- nonportable-atomics=yes选项。如果你为x86平台编译，那么最低要求i486以上的CPU支持；如果你为SPARC平台编译，那 么最低要求UltraSPARC芯片。因为更老的CPU不支持compare-and-swap原子操作。<br />
		&nbsp; <br />
		</span></span></p>
</div>
